language: android

jdk: oraclejdk8

sudo: required # more memory

before_install:
  - yes | sdkmanager "platforms;android-27"

android:
  components:
    - tools
    - platform-tools
    - tools # called twice to get the newest android sdk tools
    - build-tools-27.0.3
    - android-27
    - extra-android-m2repository
    - extra-google-m2repository

env:
  - FLAVOR="openHPI"
  - FLAVOR="openSAP"
  - FLAVOR="moocHouse"
  - FLAVOR="openWHO"

script:
   - >
       ./gradlew assemble${FLAVOR}RegularDebug test${FLAVOR}RegularDebugUnitTest connected${FLAVOR}RegularDebugAndroidTest
       && ./gradlew assemble${FLAVOR}RegularRelease test${FLAVOR}RegularReleaseUnitTest
